<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Wisdom Meter - Track and visualize your daily wisdom scores with advanced analytics">
    <title>Wisdom Meter | Advanced Self-Reflection Tool</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #10b981;
            --primary-light: #34d399;
            --primary-dark: #059669;
            --accent-color: #f59e0b;
            --accent-light: #fbbf24;
            --accent-dark: #d97706;
            --background: #0f172a;
            --background-light: #1e293b;
            --card-bg: rgba(30, 41, 59, 0.8);
            --text-color: #f8fafc;
            --text-muted: #94a3b8;
            --border-color: rgba(148, 163, 184, 0.2);
            --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --border-radius: 0.75rem;
            --transition-normal: all 0.3s ease;
            --transition-slow: all 0.5s ease;
            --red: #ef4444;
            --yellow: #f59e0b;
            --green: #10b981;
            --blue: #3b82f6;
            --purple: #8b5cf6;
            --chart-bg: rgba(30, 41, 59, 0.4);
            --chart-line: rgba(16, 185, 129, 0.8);
            --chart-point: #10b981;
            --chart-grid: rgba(255, 255, 255, 0.05);
            --chart-text: rgba(255, 255, 255, 0.7);
        }

        .light-mode {
            --background: #f8fafc;
            --background-light: #f1f5f9;
            --card-bg: rgba(255, 255, 255, 0.8);
            --text-color: #1e293b;
            --text-muted: #64748b;
            --border-color: rgba(100, 116, 139, 0.2);
            --chart-bg: rgba(241, 245, 249, 0.6);
            --chart-grid: rgba(100, 116, 139, 0.1);
            --chart-text: rgba(30, 41, 59, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background-color: var(--background);
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(16, 185, 129, 0.05) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(245, 158, 11, 0.05) 0%, transparent 25%);
            color: var(--text-color);
            min-height: 100vh;
            line-height: 1.5;
            overflow-x: hidden;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            padding-top: 1rem;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary-light), var(--accent-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
        }

        .header p {
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Main Navigation */
        .main-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: var(--background-light);
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo a {
            color: var(--primary-light);
            text-decoration: none;
            font-weight: 700;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition-normal);
        }

        .logo a:hover {
            color: var(--accent-light);
            transform: scale(1.05);
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-link {
            color: var(--text-muted);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: var(--transition-normal);
            font-weight: 500;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary-light);
            background: rgba(16, 185, 129, 0.1);
        }

        .app-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background-color: var(--background-light);
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-sm);
        }

        .nav-actions {
            display: flex;
            gap: 0.75rem;
        }

        .nav-button {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-normal);
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            transform: scale(1.05);
        }

        .nav-button.active {
            background: rgba(16, 185, 129, 0.2);
            color: var(--primary-light);
            border-color: var(--primary-color);
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        @media (min-width: 1024px) {
            .grid {
                grid-template-columns: 3fr 2fr;
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            backdrop-filter: blur(10px);
            transition: var(--transition-normal);
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            border-color: rgba(148, 163, 184, 0.3);
        }

        .question-block {
            margin-bottom: 2rem;
            animation: fadeIn 0.5s ease forwards;
            opacity: 0;
            transform: translateY(10px);
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-block label {
            display: block;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .question-block .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .question-block .question-header .question-number {
            background: var(--background-light);
            color: var(--text-muted);
            width: 1.75rem;
            height: 1.75rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: 600;
            flex-shrink: 0;
            margin-right: 0.75rem;
        }

        .question-block .question-header .question-text {
            flex-grow: 1;
        }

        .question-block .question-header .question-info {
            color: var(--text-muted);
            cursor: pointer;
            transition: var(--transition-normal);
            margin-left: 0.5rem;
        }

        .question-block .question-header .question-info:hover {
            color: var(--text-color);
        }

        .slider-container {
            position: relative;
            padding: 1.5rem 0;
        }

        .slider-track {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--background-light);
            border-radius: 3px;
            transform: translateY(-50%);
        }

        .slider-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--primary-light));
            border-radius: 3px;
            width: 50%; /* Default value, will be updated by JS */
        }

        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: transparent;
            outline: none;
            position: relative;
            z-index: 2;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: var(--transition-normal);
        }

        .slider::-moz-range-thumb {
            width: 22px;
            height: 22px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            border-radius: 50%;
            cursor: pointer;
            border: none;
            box-shadow: var(--shadow-sm);
            transition: var(--transition-normal);
        }

        .slider::-webkit-slider-thumb:hover,
        .slider::-moz-range-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 0 5px rgba(16, 185, 129, 0.2);
        }

        .slider-values {
            display: flex;
            justify-content: space-between;
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.25rem;
        }

        .slider-labels span {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-align: center;
            width: 20%;
        }

        .submit-button {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 2rem;
            position: relative;
            overflow: hidden;
        }

        .submit-button:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .submit-button:active {
            transform: translateY(0);
        }

        .submit-button::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .submit-button:hover::after {
            animation: shine 1.5s ease;
        }

        @keyframes shine {
            0% {
                opacity: 0;
                transform: translateX(-100%) rotate(45deg);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateX(100%) rotate(45deg);
            }
        }

        /* Result Section */
        .result-card {
            text-align: center;
            transition: var(--transition-slow);
            opacity: 0;
            transform: scale(0.95);
        }

        .result-card.active {
            opacity: 1;
            transform: scale(1);
        }

        .result-card h2 {
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .gauge-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 2rem;
        }

        .gauge-bg {
            fill: none;
            stroke: rgba(255, 255, 255, 0.1);
            stroke-width: 10;
        }

        .gauge-progress {
            fill: none;
            stroke: url(#gauge-gradient);
            stroke-width: 10;
            stroke-linecap: round;
            transition: stroke-dasharray 1.5s ease;
        }

        .gauge-text {
            font-size: 2rem;
            font-weight: bold;
            fill: var(--text-color);
        }

        .gauge-label {
            font-size: 0.875rem;
            fill: var(--text-muted);
        }

        .result-message {
            color: var(--text-muted);
            margin-top: 1rem;
            transition: opacity 0.5s ease;
            opacity: 0;
        }

        .result-message.visible {
            opacity: 1;
        }

        .result-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: center;
        }

        .result-action-btn {
            background: var(--background-light);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: var(--transition-normal);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-action-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .result-action-btn.primary {
            background: rgba(16, 185, 129, 0.2);
            color: var(--primary-light);
            border-color: var(--primary-color);
        }

        .result-action-btn.primary:hover {
            background: rgba(16, 185, 129, 0.3);
        }

        .result-breakdown {
            margin-top: 2rem;
            text-align: left;
            border-top: 1px solid var(--border-color);
            padding-top: 1.5rem;
        }

        .result-breakdown h3 {
            margin-bottom: 1rem;
            font-size: 1.25rem;
            color: var(--text-muted);
        }

        .breakdown-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            animation: fadeIn 0.5s ease forwards;
            opacity: 0;
        }

        .breakdown-label {
            flex: 1;
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .breakdown-bar-container {
            flex: 2;
            height: 8px;
            background: var(--background-light);
            border-radius: 4px;
            overflow: hidden;
            margin: 0 1rem;
        }

        .breakdown-bar {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--primary-light));
            border-radius: 4px;
            transition: width 1s ease;
        }

        .breakdown-value {
            width: 2rem;
            text-align: right;
            font-size: 0.875rem;
            font-weight: 600;
        }

        /* Tabs for History */
        .tabs {
            margin-top: 1.5rem;
        }

        .tab-list {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .tab-trigger {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            padding: 0.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: var(--transition-normal);
            font-size: 0.875rem;
        }

        .tab-trigger.active {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-light);
        }

        .tab-trigger:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-color);
        }

        .tab-content {
            height: 0;
            overflow: hidden;
            opacity: 0;
            transition: var(--transition-normal);
        }

        .tab-content.active {
            height: 300px;
            opacity: 1;
        }

        /* Chart Styles */
        .chart-container {
            height: 100%;
            position: relative;
            background: var(--chart-bg);
            border-radius: 0.5rem;
            padding: 1rem;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .chart-canvas {
            width: 100%;
            height: 100%;
        }

        .chart-tooltip {
            position: absolute;
            background: var(--background-light);
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            padding: 0.75rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: 10;
            box-shadow: var(--shadow-sm);
            font-size: 0.875rem;
            min-width: 150px;
        }

        .chart-tooltip-date {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .chart-tooltip-score {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chart-tooltip-label {
            color: var(--text-muted);
        }

        .chart-tooltip-value {
            font-weight: 600;
            color: var(--primary-light);
        }

        /* Insights Card */
        .insights-card {
            margin-top: 1.5rem;
        }

        .insights-card h3 {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .insights-card h3 i {
            color: var(--primary-light);
        }

        .insight-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--primary-color);
        }

        .insight-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .insight-title i {
            color: var(--primary-light);
        }

        .insight-content {
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        /* Streak Card */
        .streak-card {
            margin-top: 1.5rem;
            text-align: center;
        }

        .streak-value {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary-light);
            margin: 1rem 0;
        }

        .streak-label {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }

        .streak-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.25rem;
        }

        .calendar-day {
            aspect-ratio: 1;
            border-radius: 0.25rem;
            background: var(--background-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .calendar-day.completed {
            background: rgba(16, 185, 129, 0.2);
            color: var(--primary-light);
            border: 1px solid var(--primary-color);
        }

        .calendar-day.today {
            border: 1px dashed var(--accent-color);
            color: var(--accent-light);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-normal);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            padding: 2rem;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            transform: translateY(20px);
            transition: var(--transition-normal);
            box-shadow: var(--shadow-lg);
            position: relative;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            margin-bottom: 1.5rem;
        }

        .modal-title {
            color: var(--primary-light);
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .modal-title i {
            font-size: 1.25rem;
        }

        .modal-description {
            color: var(--text-muted);
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .modal-body p {
            margin-bottom: 1rem;
        }

        .modal-body ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .modal-body li {
            margin-bottom: 0.5rem;
        }

        .modal-section {
            margin-bottom: 1.5rem;
        }

        .modal-section-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--accent-light);
        }

        .close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition-normal);
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-button:hover {
            color: var(--text-color);
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }

        /* Settings Modal */
        .settings-section {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-section:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .settings-title {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .settings-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .settings-option:last-child {
            margin-bottom: 0;
        }

        .settings-label {
            color: var(--text-muted);
        }

        .settings-description {
            font-size: 0.75rem;
            color: var(--text-muted);
            opacity: 0.8;
            margin-top: 0.25rem;
        }

        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--background-light);
            transition: var(--transition-normal);
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: var(--text-muted);
            transition: var(--transition-normal);
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: rgba(16, 185, 129, 0.3);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
            background-color: var(--primary-light);
        }

        /* Color Theme Selector */
        .color-themes {
            display: flex;
            gap: 0.75rem;
            margin-top: 0.75rem;
        }

        .color-theme {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition-normal);
            position: relative;
        }

        .color-theme:hover {
            transform: scale(1.1);
        }

        .color-theme.active:after {
            content: "✓";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

        .theme-green {
            background: linear-gradient(135deg, #10b981, #34d399);
        }

        .theme-blue {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
        }

        .theme-purple {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
        }

        .theme-red {
            background: linear-gradient(135deg, #ef4444, #f87171);
        }

      
        .theme-amber {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
        }

        /* Journal Entry */
        .journal-entry {
            background: var(--background-light);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--primary-color);
        }

        .journal-date {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .journal-content {
            color: var(--text-color);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Journal Modal */
        .journal-textarea {
            width: 100%;
            min-height: 150px;
            background: var(--background-light);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 1rem;
            border-radius: 0.5rem;
            resize: vertical;
            font-family: inherit;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 1rem 0;
        }

        .journal-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
        }

        .journal-save-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: var(--transition-normal);
        }

        .journal-save-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
        }

        /* Radar Chart */
        .radar-chart {
            position: relative;
            width: 100%;
            height: 100%;
            margin: 0 auto;
        }

        .radar-area {
            fill: rgba(16, 185, 129, 0.2);
            stroke: var(--primary-color);
            stroke-width: 2;
        }

        .radar-circle {
            fill: none;
            stroke: rgba(255, 255, 255, 0.1);
        }

        .radar-axis {
            stroke: rgba(255, 255, 255, 0.2);
        }

        .radar-label {
            font-size: 0.7rem;
            fill: var(--text-muted);
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--primary-color);
            border-radius: 0.5rem;
            padding: 1rem;
            box-shadow: var(--shadow-lg);
            z-index: 50;
            width: 300px;
            max-width: calc(100% - 2rem);
            transform: translateX(120%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .notification-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .notification-title i {
            color: var(--primary-light);
        }

        .notification-close {
            color: var(--text-muted);
            cursor: pointer;
            transition: var(--transition-normal);
        }

        .notification-close:hover {
            color: var(--text-color);
        }

        .notification-message {
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        .notification-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: var(--primary-color);
            border-radius: 0 0 0 0.5rem;
            animation: notification-progress 5s linear forwards;
        }

        @keyframes notification-progress {
            from { width: 100%; }
            to { width: 0%; }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 0.75rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .gauge-container {
                width: 150px;
                height: 150px;
            }

            .gauge-text {
                font-size: 1.5rem;
            }

            .result-actions {
                flex-direction: column;
                gap: 0.5rem;
            }

            .result-action-btn {
                width: 100%;
                justify-content: center;
            }
            
            .nav-links {
                gap: 0.5rem;
            }
            
            .nav-link {
                padding: 0.5rem;
                font-size: 0.875rem;
            }
        }

        @media (max-width: 480px) {
            .question-block label {
                font-size: 0.9rem;
            }

            .tab-trigger {
                font-size: 0.75rem;
                padding: 0.4rem 0.2rem;
            }

            .modal-content {
                padding: 1.5rem 1rem;
            }

            .streak-calendar {
                gap: 0.15rem;
            }

            .calendar-day {
                font-size: 0.65rem;
            }
            
            .main-nav {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .nav-links {
                width: 100%;
                justify-content: space-between;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .float {
            animation: float 3s ease-in-out infinite;
        }

        /* Loading spinner */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-light);
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="main-nav">
            <div class="logo">
                <a href="wisdommeter.html">
                    <i class="fas fa-brain"></i> WisdomMeter
                </a>
            </div>
            <div class="nav-links">
                <a href="wisdommeter.html" class="nav-link active">Home</a>
                <a href="index.html" class="nav-link">Dashboard</a>
            </div>
            
        </nav>

        <div class="header">
            <h1>Wisdom Meter</h1>
            <p>Reflect on your daily decisions and measure your wisdom over time</p>
        </div>

        <div class="app-nav">
            <div class="logo">
                <a href="wisdommeter.html">
                    <i class="fas fa-clipboard-check"></i> Daily Assessment
                </a>
            </div>
            <div class="nav-actions">
                <button class="nav-button" id="settings-button" aria-label="Settings">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="nav-button" id="info-button" aria-label="Information">
                    <i class="fas fa-info"></i>
                </button>
                <button class="nav-button" id="theme-toggle" aria-label="Toggle dark/light mode">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <form id="wisdom-form">
                    <div class="question-block" style="animation-delay: 0ms;">
                        <div class="question-header">
                            <span class="question-number">1</span>
                            <label for="rationality" class="question-text">How did you navigate the consequences of your choices today?</label>
                            <span class="question-info" data-question="rationality" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-rationality"></div>
                            </div>
                            <input type="range" class="slider" id="rationality" name="rationality" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <div class="question-block" style="animation-delay: 100ms;">
                        <div class="question-header">
                            <span class="question-number">2</span>
                            <label for="calmness" class="question-text">How did you keep your cool during today's storms?</label>
                            <span class="question-info" data-question="calmness" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-calmness"></div>
                            </div>
                            <input type="range" class="slider" id="calmness" name="calmness" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <div class="question-block" style="animation-delay: 200ms;">
                        <div class="question-header">
                            <span class="question-number">3</span>
                            <label for="empathy" class="question-text">How did you strive to understand the viewpoints of others in your encounters today?</label>
                            <span class="question-info" data-question="empathy" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-empathy"></div>
                            </div>
                            <input type="range" class="slider" id="empathy" name="empathy" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <div class="question-block" style="animation-delay: 300ms;">
                        <div class="question-header">
                            <span class="question-number">4</span>
                            <label for="reflection" class="question-text">How often did you take a moment to reflect on your thoughts and actions today?</label>
                            <span class="question-info" data-question="reflection" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-reflection"></div>
                            </div>
                            <input type="range" class="slider" id="reflection" name="reflection" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <div class="question-block" style="animation-delay: 400ms;">
                        <div class="question-header">
                            <span class="question-number">5</span>
                            <label for="kindness" class="question-text">How much kindness did you sprinkle on others today?</label>
                            <span class="question-info" data-question="kindness" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-kindness"></div>
                            </div>
                            <input type="range" class="slider" id="kindness" name="kindness" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <div class="question-block" style="animation-delay: 500ms;">
                        <div class="question-header">
                            <span class="question-number">6</span>
                            <label for="adaptability" class="question-text">How well did you adapt to unexpected changes or challenges that arose today?</label>
                            <span class="question-info" data-question="adaptability" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-adaptability"></div>
                            </div>
                            <input type="range" class="slider" id="adaptability" name="adaptability" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <div class="question-block" style="animation-delay: 600ms;">
                        <div class="question-header">
                            <span class="question-number">7</span>
                            <label for="ethics" class="question-text">How did you chase the right path in tough choices today?</label>
                            <span class="question-info" data-question="ethics" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-ethics"></div>
                            </div>
                            <input type="range" class="slider" id="ethics" name="ethics" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <div class="question-block" style="animation-delay: 700ms;">
                        <div class="question-header">
                            <span class="question-number">8</span>
                            <label for="learning" class="question-text">How eagerly did you seek new treasures of knowledge today?</label>
                            <span class="question-info" data-question="learning" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-learning"></div>
                            </div>
                            <input type="range" class="slider" id="learning" name="learning" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <div class="question-block" style="animation-delay: 800ms;">
                        <div class="question-header">
                            <span class="question-number">9</span>
                            <label for="meaning" class="question-text">How did you seek meaning in your actions today?</label>
                            <span class="question-info" data-question="meaning" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-meaning"></div>
                            </div>
                            <input type="range" class="slider" id="meaning" name="meaning" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <div class="question-block" style="animation-delay: 900ms;">
                        <div class="question-header">
                            <span class="question-number">10</span>
                            <label for="presence" class="question-text">How present were you in the moments you experienced today?</label>
                            <span class="question-info" data-question="presence" title="Learn more about this question">
                                <i class="fas fa-circle-question"></i>
                            </span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-track">
                                <div class="slider-progress" id="progress-presence"></div>
                            </div>
                            <input type="range" class="slider" id="presence" name="presence" min="1" max="5" value="3" 
                                   aria-valuemin="1" aria-valuemax="5" aria-valuenow="3">
                        </div>
                        <div class="slider-values">
                            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                        </div>
                        <div class="slider-labels">
                            <span>Poor</span><span></span><span>Average</span><span></span><span>Excellent</span>
                        </div>
                    </div>

                    <button type="submit" class="submit-button">
                        Calculate Wisdom Score
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>
            </div>

            <div>
                <div class="card result-card" id="result-card">
                    <h2>Your Wisdom Score</h2>
                    <div class="gauge-container">
                        <svg viewBox="0 0 100 100">
                            <!-- Background circle -->
                            <circle class="gauge-bg" cx="50" cy="50" r="40"></circle>
                            
                            <!-- Progress circle -->
                            <circle class="gauge-progress" id="gauge-progress" 
                                    cx="50" cy="50" r="40"
                                    stroke-dasharray="0 251.2" 
                                    stroke-dashoffset="62.8">
                            </circle>
                            
                            <!-- Gradient definition -->
                            <defs>
                                <linearGradient id="gauge-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" stop-color="#10b981" />
                                    <stop offset="100%" stop-color="#f59e0b" />
                                </linearGradient>
                            </defs>
                            
                            <!-- Text in the middle -->
                            <text class="gauge-text" id="gauge-text"
                                  x="50" y="50" text-anchor="middle">
                                0%
                            </text>
                            <text class="gauge-label" id="gauge-label"
                                  x="50" y="62" text-anchor="middle">
                                Mastery
                            </text>
                        </svg>
                    </div>
                    <p class="result-message" id="result-message"></p>
                    
                    <div class="result-actions">
                        <button class="result-action-btn" id="view-insights">
                            <i class="fas fa-lightbulb"></i> View Insights
                        </button>
                        <button class="result-action-btn primary" id="save-journal">
                            <i class="fas fa-book"></i> Add Journal
                        </button>
                    </div>
                    
                    <div class="result-breakdown" id="result-breakdown">
                        <h3>Wisdom Breakdown</h3>
                        <div id="breakdown-items">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="card" id="history-card" style="display: none; margin-top: 1.5rem;">
                    <h2>Wisdom History</h2>
                    
                    <div class="tabs">
                        <div class="tab-list">
                            <button class="tab-trigger" data-period="day">Day</button>
                            <button class="tab-trigger active" data-period="week">Week</button>
                            <button class="tab-trigger" data-period="month">Month</button>
                            <button class="tab-trigger" data-period="year">Year</button>
                        </div>
                        
                        <div class="tab-content active" id="chart-container">
                            <div class="chart-container">
                                <canvas class="chart-canvas" id="history-chart"></canvas>
                                <div class="chart-tooltip" id="chart-tooltip"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card streak-card" id="streak-card" style="display: none; margin-top: 1.5rem;">
                    <h3><i class="fas fa-fire"></i> Current Streak</h3>
                    <div class="streak-value" id="streak-value">0</div>
                    <div class="streak-label">consecutive days of reflection</div>
                    
                    <div class="streak-calendar" id="streak-calendar">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="card insights-card" id="insights-card" style="display: none; margin-top: 1.5rem;">
                    <h3><i class="fas fa-lightbulb"></i> Wisdom Insights</h3>
                    
                    <div id="insights-container">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Modal -->
    <div class="modal-overlay" id="info-modal">
        <div class="modal-content">
            <button class="close-button" id="close-info-modal">&times;</button>
            
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-info-circle"></i> About Wisdom Meter</h2>
                <p class="modal-description">Understanding how the Wisdom Meter works</p>
            </div>
            
            <div class="modal-body">
                <div class="modal-section">
                    <h3 class="modal-section-title">What is Wisdom Meter?</h3>
                    <p>The Wisdom Meter is an advanced self-reflection tool designed to help you assess your daily actions and decisions through a series of thoughtfully crafted questions. Each question focuses on key aspects of wisdom, encouraging self-discipline, empathy, and thoughtful decision-making.</p>
                </div>
                
                <div class="modal-section">
                    <h3 class="modal-section-title">How It Works</h3>
                    <p>By rating your responses on a scale of 1-5, you can gain insights into your wisdom level for the day. The app calculates your overall wisdom score and provides personalized insights based on your responses.</p>
                    <p>Regular use of the Wisdom Meter helps you:</p>
                    <ul>
                        <li>Track your personal growth over time</li>
                        <li>Identify areas where you excel in wisdom</li>
                        <li>Discover opportunities for improvement</li>
                        <li>Build a habit of daily reflection</li>
                    </ul>
                </div>
                
                <div class="modal-section">
                    <h3 class="modal-section-title">Understanding Your Score</h3>
                    <p>Your wisdom score is calculated as a percentage based on your responses to all questions:</p>
                    <ul>
                        <li><strong>0-30%:</strong> Beginning your wisdom journey</li>
                        <li><strong>31-50%:</strong> Developing wisdom in some areas</li>
                        <li><strong>51-70%:</strong> Making wise choices in many situations</li>
                        <li><strong>71-90%:</strong> Impressive wisdom guiding your actions</li>
                        <li><strong>91-100%:</strong> Remarkable wisdom in daily life</li>
                    </ul>
                </div>
                
                <div class="modal-section">
                    <h3 class="modal-section-title">Privacy & Data</h3>
                    <p>All your wisdom data is stored locally on your device. We don't collect or transmit any personal information. You can export or delete your data at any time through the settings.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal-content">
            <button class="close-button" id="close-settings-modal">&times;</button>
            
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-cog"></i> Settings</h2>
                <p class="modal-description">Customize your Wisdom Meter experience</p>
            </div>
            
            <div class="modal-body">
                <div class="settings-section">
                    <h3 class="settings-title">Appearance</h3>
                    
                    <div class="settings-option">
                        <div>
                            <div class="settings-label">Dark Mode</div>
                            <div class="settings-description">Switch between light and dark theme</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="dark-mode-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="settings-option">
                        <div>
                            <div class="settings-label">Color Theme</div>
                            <div class="settings-description">Choose your preferred color scheme</div>
                        </div>
                        <div class="color-themes">
                            <div class="color-theme theme-green active" data-theme="green"></div>
                            <div class="color-theme theme-blue" data-theme="blue"></div>
                            <div class="color-theme theme-purple" data-theme="purple"></div>
                            <div class="color-theme theme-red" data-theme="red"></div>
                            <div class="color-theme theme-amber" data-theme="amber"></div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 class="settings-title">Notifications</h3>
                    
                    <div class="settings-option">
                        <div>
                            <div class="settings-label">Daily Reminder</div>
                            <div class="settings-description">Get reminded to complete your daily reflection</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="reminder-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="settings-option">
                        <div>
                            <div class="settings-label">Reminder Time</div>
                            <div class="settings-description">Set when you'd like to be reminded</div>
                        </div>
                        <input type="time" id="reminder-time" value="20:00" style="background: var(--background-light); color: var(--text-color); border: 1px solid var(--border-color); padding: 0.5rem; border-radius: 0.25rem;">
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 class="settings-title">Data Management</h3>
                    
                    <div class="settings-option">
                        <div>
                            <div class="settings-label">Export Data</div>
                            <div class="settings-description">Download all your wisdom data</div>
                        </div>
                        <button id="export-data-btn" style="background: var(--background-light); color: var(--text-color); border: 1px solid var(--border-color); padding: 0.5rem 1rem; border-radius: 0.25rem; cursor: pointer;">
                            Export
                        </button>
                    </div>
                    
                    <div class="settings-option">
                        <div>
                            <div class="settings-label">Clear All Data</div>
                            <div class="settings-description">Delete all your stored wisdom data</div>
                        </div>
                        <button id="clear-data-btn" style="background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); padding: 0.5rem 1rem; border-radius: 0.25rem; cursor: pointer;">
                            Clear
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Question Info Modal -->
    <div class="modal-overlay" id="question-info-modal">
        <div class="modal-content">
            <button class="close-button" id="close-question-info-modal">&times;</button>
            
            <div class="modal-header">
                <h2 class="modal-title" id="question-info-title">Question Information</h2>
                <p class="modal-description" id="question-info-description">Understanding this aspect of wisdom</p>
            </div>
            
            <div class="modal-body" id="question-info-content">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Journal Modal -->
    <div class="modal-overlay" id="journal-modal">
        <div class="modal-content">
            <button class="close-button" id="close-journal-modal">&times;</button>
            
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-book"></i> Wisdom Journal</h2>
                <p class="modal-description">Add notes about your day's wisdom journey</p>
            </div>
            
            <div class="modal-body">
                <p>Reflect on your wisdom score and add personal notes about your day:</p>
                
                <textarea id="journal-entry" class="journal-textarea" placeholder="What did you learn today? What wisdom insights would you like to remember?"></textarea>
                
                <button id="save-journal-entry" class="journal-save-btn">
                    <i class="fas fa-save"></i> Save Journal Entry
                </button>
                
                <div id="journal-history" style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem; color: var(--text-muted);">Previous Entries</h3>
                    <div id="journal-entries-container">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Insights Modal -->
    <div class="modal-overlay" id="insights-modal">
        <div class="modal-content">
            <button class="close-button" id="close-insights-modal">&times;</button>
            
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-lightbulb"></i> Wisdom Insights</h2>
                <p class="modal-description">Personalized insights based on your wisdom patterns</p>
            </div>
            
            <div class="modal-body" id="insights-modal-content">
                <!-- Content will be populated by JavaScript -->
                
                <div style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem; color: var(--accent-light);">Wisdom Profile</h3>
                    <div id="radar-chart-container" style="height: 300px; width: 100%;">
                        <svg id="radar-chart" class="radar-chart" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid meet">
                            <!-- Will be populated by JavaScript -->
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-header">
            <div class="notification-title">
                <i class="fas fa-check-circle"></i> <span id="notification-title">Success</span>
            </div>
            <div class="notification-close" id="close-notification">&times;</div>
        </div>
        <div class="notification-message" id="notification-message">
            Your action was completed successfully.
        </div>
        <div class="notification-progress"></div>
    </div>

    <script>
        // Question information data
        const questionInfo = {
            rationality: {
                title: "Rational Decision Making",
                description: "Making decisions based on reason and evidence",
                content: `
                    <p>Rational decision-making involves carefully weighing the consequences of your choices before acting. It means considering evidence, thinking through potential outcomes, and making choices that align with your values and goals.</p>
                    <p>When you score high in this area, you're likely making decisions that serve your long-term interests rather than just reacting to immediate emotions or impulses.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Before making important decisions, list pros and cons</li>
                        <li>Ask yourself: "What would my future self want me to do?"</li>
                        <li>Consider how your choices affect others, not just yourself</li>
                        <li>Look for evidence that contradicts your initial assumptions</li>
                    </ul>
                `
            },
            calmness: {
                title: "Emotional Regulation",
                description: "Maintaining composure during challenging situations",
                content: `
                    <p>Emotional regulation is the ability to stay calm and composed even when facing stressful or challenging situations. It doesn't mean suppressing emotions, but rather experiencing them without being overwhelmed or controlled by them.</p>
                    <p>A high score in this area indicates you're able to respond thoughtfully to situations rather than reacting impulsively based on strong emotions.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Practice deep breathing when you feel emotions intensifying</li>
                        <li>Create a mental "pause button" to use before responding</li>
                        <li>Identify your emotional triggers and prepare strategies for them</li>
                        <li>Develop a regular meditation practice to build emotional awareness</li>
                    </ul>
                `
            },
            empathy: {
                title: "Empathetic Understanding",
                description: "Seeing the world through others' perspectives",
                content: `
                    <p>Empathy is the ability to understand and share the feelings of another person. It involves putting yourself in someone else's shoes and seeing the world from their perspective, even when it differs from your own.</p>
                    <p>Scoring high in empathy means you're likely able to connect deeply with others, understand diverse viewpoints, and respond compassionately to people's needs.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Practice active listening without planning your response</li>
                        <li>Ask questions to better understand others' experiences</li>
                        <li>Read fiction to experience different perspectives</li>
                        <li>Challenge yourself to find merit in viewpoints you disagree with</li>
                    </ul>
                `
            },
            reflection: {
                title: "Self-Reflection",
                description: "Taking time to examine your thoughts and actions",
                content: `
                    <p>Self-reflection is the practice of examining your own thoughts, feelings, and behaviors to gain insight and understanding. It involves stepping back from your experiences to consider their meaning and implications.</p>
                    <p>A high score in reflection suggests you regularly take time to process your experiences, learn from them, and adjust your approach based on what you discover.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Set aside dedicated time each day for reflection</li>
                        <li>Keep a journal to record insights and patterns</li>
                        <li>Ask yourself: "What did I learn today?" each evening</li>
                        <li>Consider how your actions align with your values</li>
                    </ul>
                `
            },
            kindness: {
                title: "Compassionate Action",
                description: "Extending kindness and care to others",
                content: `
                    <p>Kindness involves acting with genuine care and consideration for others' wellbeing. It's about extending compassion not just to those close to you, but to all people you encounter.</p>
                    <p>Scoring high in kindness indicates you regularly take actions that benefit others, even when there's no direct benefit to yourself.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Look for small opportunities to help others each day</li>
                        <li>Practice random acts of kindness</li>
                        <li>Offer sincere compliments and encouragement</li>
                        <li>Consider how your words might impact others before speaking</li>
                    </ul>
                `
            },
            adaptability: {
                title: "Flexible Adaptation",
                description: "Adjusting effectively to change and uncertainty",
                content: `
                    <p>Adaptability is the ability to adjust effectively to changing circumstances, unexpected challenges, or new information. It involves being flexible in your thinking and approach rather than rigid or fixed.</p>
                    <p>A high score in adaptability suggests you can pivot when needed, embrace change, and find creative solutions to new problems.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Practice reframing challenges as opportunities</li>
                        <li>Deliberately step outside your comfort zone regularly</li>
                        <li>When plans change, focus on what you can control</li>
                        <li>Develop multiple approaches to important goals</li>
                    </ul>
                `
            },
            ethics: {
                title: "Ethical Integrity",
                description: "Making choices aligned with moral principles",
                content: `
                    <p>Ethical integrity involves making choices based on moral principles and values, even when doing so is difficult or comes at a personal cost. It's about doing what's right, not just what's easy or expedient.</p>
                    <p>Scoring high in ethics indicates you consistently try to make choices that align with your moral compass and consider the ethical implications of your actions.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Clarify your core values and refer to them when making decisions</li>
                        <li>Consider who might be affected by your choices</li>
                        <li>Ask yourself: "Would I be comfortable if everyone knew about this choice?"</li>
                        <li>Seek feedback from people whose ethical judgment you respect</li>
                    </ul>
                `
            },
            learning: {
                title: "Continuous Learning",
                description: "Actively seeking knowledge and growth",
                content: `
                    <p>Continuous learning is the ongoing pursuit of knowledge, skills, and understanding. It involves curiosity, openness to new ideas, and a willingness to challenge your existing beliefs.</p>
                    <p>A high score in learning suggests you actively seek out new information, engage with diverse perspectives, and regularly expand your understanding of the world.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Set aside time each day for learning something new</li>
                        <li>Explore topics outside your usual interests</li>
                        <li>Ask questions and seek to understand before forming opinions</li>
                        <li>Reflect on how new information changes your perspective</li>
                    </ul>
                `
            },
            meaning: {
                title: "Purpose and Meaning",
                description: "Finding significance in your actions and experiences",
                content: `
                    <p>Seeking meaning involves looking for significance and purpose in your actions and experiences. It's about connecting what you do to values and goals that matter deeply to you.</p>
                    <p>Scoring high in meaning indicates you regularly consider the deeper purpose behind your actions and strive to live in alignment with what you find most meaningful.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Reflect on what gives your life meaning and purpose</li>
                        <li>Connect your daily activities to your larger goals</li>
                        <li>Consider how your actions contribute to something beyond yourself</li>
                        <li>Create rituals that remind you of what matters most</li>
                    </ul>
                `
            },
            presence: {
                title: "Mindful Presence",
                description: "Being fully engaged in the present moment",
                content: `
                    <p>Mindful presence is the practice of being fully engaged in the current moment, rather than dwelling on the past or worrying about the future. It involves bringing your complete attention to your experiences as they unfold.</p>
                    <p>A high score in presence suggests you're able to focus on what's happening now, appreciate the details of your experiences, and engage fully with the people and activities in your life.</p>
                    <h4 style="margin-top: 1rem; color: var(--primary-light);">Tips to improve:</h4>
                    <ul>
                        <li>Practice mindfulness meditation regularly</li>
                        <li>Take "presence breaks" throughout the day to check in with your senses</li>
                        <li>Put away digital devices during conversations and meals</li>
                        <li>Notice when your mind wanders and gently bring it back to the present</li>
                    </ul>
                `
            }
        };

        // Initialize all range progress bars
        document.addEventListener('DOMContentLoaded', function() {
            // Set up all sliders
            const sliders = document.querySelectorAll('.slider');
            sliders.forEach(slider => {
                updateSliderProgress(slider);
                
                // Update progress when slider changes
                slider.addEventListener('input', function() {
                    updateSliderProgress(this);
                });
            });
            
            // Load saved data
            loadSavedData();
            
            // Set up question info tooltips
            setupQuestionInfo();
            
            // Set up modals
            setupModals();
            
            // Set up theme toggle
            setupThemeToggle();
            
            // Set up color themes
            setupColorThemes();
            
            // Set up data management
            setupDataManagement();
            
            // Set up result actions
            setupResultActions();
            
            // Generate streak calendar
            generateStreakCalendar();
            
            // Load journal entries
            loadJournalEntries();
        });
        
        // Update the progress bar for range inputs
        function updateSliderProgress(slider) {
            const id = slider.id;
            const value = slider.value;
            const min = slider.min || 1;
            const max = slider.max || 5;
            const progressElement = document.getElementById(`progress-${id}`);
            
            if (progressElement) {
                const percentage = ((value - min) / (max - min)) * 100;
                progressElement.style.width = `${percentage}%`;
            }
            
            // Update aria attribute for accessibility
            slider.setAttribute('aria-valuenow', value);
        }
        
        // Set up question info tooltips
        function setupQuestionInfo() {
            const questionInfoIcons = document.querySelectorAll('.question-info');
            const questionInfoModal = document.getElementById('question-info-modal');
            const closeQuestionInfoModal = document.getElementById('close-question-info-modal');
            const questionInfoTitle = document.getElementById('question-info-title');
            const questionInfoDescription = document.getElementById('question-info-description');
            const questionInfoContent = document.getElementById('question-info-content');
            
            questionInfoIcons.forEach(icon => {
                icon.addEventListener('click', function() {
                    const questionId = this.dataset.question;
                    const info = questionInfo[questionId];
                    
                    if (info) {
                        questionInfoTitle.textContent = info.title;
                        questionInfoDescription.textContent = info.description;
                        questionInfoContent.innerHTML = info.content;
                        questionInfoModal.classList.add('active');
                    }
                });
            });
            
            closeQuestionInfoModal.addEventListener('click', function() {
                questionInfoModal.classList.remove('active');
            });
            
            questionInfoModal.addEventListener('click', function(event) {
                if (event.target === questionInfoModal) {
                    questionInfoModal.classList.remove('active');
                }
            });
        }
        
        // Set up modals
        function setupModals() {
            // Info modal
            const infoButton = document.getElementById('info-button');
            const infoModal = document.getElementById('info-modal');
            const closeInfoModal = document.getElementById('close-info-modal');
            
            infoButton.addEventListener('click', function() {
                infoModal.classList.add('active');
            });
            
            closeInfoModal.addEventListener('click', function() {
                infoModal.classList.remove('active');
            });
            
            infoModal.addEventListener('click', function(event) {
                if (event.target === infoModal) {
                    infoModal.classList.remove('active');
                }
            });
            
            // Settings modal
            const settingsButton = document.getElementById('settings-button');
            const settingsModal = document.getElementById('settings-modal');
            const closeSettingsModal = document.getElementById('close-settings-modal');
            
            settingsButton.addEventListener('click', function() {
                settingsModal.classList.add('active');
            });
            
            closeSettingsModal.addEventListener('click', function() {
                settingsModal.classList.remove('active');
            });
            
            settingsModal.addEventListener('click', function(event) {
                if (event.target === settingsModal) {
                    settingsModal.classList.remove('active');
                }
            });
            
            // Journal modal
            const journalButton = document.getElementById('save-journal');
            const journalModal = document.getElementById('journal-modal');
            const closeJournalModal = document.getElementById('close-journal-modal');
            
            journalButton.addEventListener('click', function() {
                journalModal.classList.add('active');
                loadJournalEntries();
            });
            
            closeJournalModal.addEventListener('click', function() {
                journalModal.classList.remove('active');
            });
            
            journalModal.addEventListener('click', function(event) {
                if (event.target === journalModal) {
                    journalModal.classList.remove('active');
                }
            });
            
            // Insights modal
            const insightsButton = document.getElementById('view-insights');
            const insightsModal = document.getElementById('insights-modal');
            const closeInsightsModal = document.getElementById('close-insights-modal');
            
            insightsButton.addEventListener('click', function() {
                generateInsights();
                generateRadarChart();
                insightsModal.classList.add('active');
            });
            
            closeInsightsModal.addEventListener('click', function() {
                insightsModal.classList.remove('active');
            });
            
            insightsModal.addEventListener('click', function(event) {
                if (event.target === insightsModal) {
                    insightsModal.classList.remove('active');
                }
            });
            
            // Close all modals with Escape key
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    document.querySelectorAll('.modal-overlay').forEach(modal => {
                        modal.classList.remove('active');
                    });
                }
            });
        }
        
        // Set up theme toggle
        function setupThemeToggle() {
            const themeToggle = document.getElementById('theme-toggle');
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            
            // Check if user has a saved preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                darkModeToggle.checked = false;
            }
            
            // Toggle theme
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('light-mode');
                
                if (document.body.classList.contains('light-mode')) {
                    localStorage.setItem('theme', 'light');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                    darkModeToggle.checked = false;
                } else {
                    localStorage.setItem('theme', 'dark');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                    darkModeToggle.checked = true;
                }
                
                // Redraw chart if it exists
                if (window.historyChart) {
                    updateChart();
                }
            });
            
            // Settings toggle
            darkModeToggle.addEventListener('change', function() {
                if (this.checked) {
                    document.body.classList.remove('light-mode');
                    localStorage.setItem('theme', 'dark');
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                } else {
                    document.body.classList.add('light-mode');
                    localStorage.setItem('theme', 'light');
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                }
                
                // Redraw chart if it exists
                if (window.historyChart) {
                    updateChart();
                }
            });
        }
        
        // Set up color themes
        function setupColorThemes() {
            const colorThemes = document.querySelectorAll('.color-theme');
            
            // Check if user has a saved preference
            const savedColorTheme = localStorage.getItem('colorTheme');
            if (savedColorTheme) {
                document.body.setAttribute('data-theme', savedColorTheme);
                colorThemes.forEach(theme => {
                    theme.classList.remove('active');
                    if (theme.dataset.theme === savedColorTheme) {
                        theme.classList.add('active');
                    }
                });
                updateThemeColors(savedColorTheme);
            }
            
            colorThemes.forEach(theme => {
                theme.addEventListener('click', function() {
                    const themeColor = this.dataset.theme;
                    
                    // Update active state
                    colorThemes.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Save preference
                    localStorage.setItem('colorTheme', themeColor);
                    document.body.setAttribute('data-theme', themeColor);
                    
                    // Update colors
                    updateThemeColors(themeColor);
                    
                    // Show notification
                    showNotification('Theme Updated', 'Your color theme has been changed successfully.');
                    
                    // Redraw chart if it exists
                    if (window.historyChart) {
                        updateChart();
                    }
                });
            });
        }
        
        // Update theme colors
        function updateThemeColors(theme) {
            let primary, primaryLight, accent;
            
            switch (theme) {
                case 'blue':
                    primary = '#3b82f6';
                    primaryLight = '#60a5fa';
                    accent = '#f59e0b';
                    break;
                case 'purple':
                    primary = '#8b5cf6';
                    primaryLight = '#a78bfa';
                    accent = '#10b981';
                    break;
                case 'red':
                    primary = '#ef4444';
                    primaryLight = '#f87171';
                    accent = '#3b82f6';
                    break;
                case 'amber':
                    primary = '#f59e0b';
                    primaryLight = '#fbbf24';
                    accent = '#8b5cf6';
                    break;
                default: // green
                    primary = '#10b981';
                    primaryLight = '#34d399';
                    accent = '#f59e0b';
            }
            
            document.documentElement.style.setProperty('--primary-color', primary);
            document.documentElement.style.setProperty('--primary-light', primaryLight);
            document.documentElement.style.setProperty('--accent-color', accent);
            document.documentElement.style.setProperty('--chart-point', primary);
            document.documentElement.style.setProperty('--chart-line', `rgba(${hexToRgb(primary)}, 0.8)`);
            
            // Update gauge gradient
            const gaugeGradient = document.querySelector('#gauge-gradient stop:first-child');
            if (gaugeGradient) {
                gaugeGradient.setAttribute('stop-color', primary);
            }
        }
        
        // Convert hex to rgb
        function hexToRgb(hex) {
            // Remove # if present
            hex = hex.replace('#', '');
            
            // Parse the hex values
            const r = parseInt(hex.substring(0, 2), 16);
            const g = parseInt(hex.substring(2, 4), 16);
            const b = parseInt(hex.substring(4, 6), 16);
            
            return `${r}, ${g}, ${b}`;
        }
        
        // Set up data management
        function setupDataManagement() {
            const exportDataBtn = document.getElementById('export-data-btn');
            const clearDataBtn = document.getElementById('clear-data-btn');
            
            exportDataBtn.addEventListener('click', function() {
                exportData();
            });
            
            clearDataBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to delete all your wisdom data? This action cannot be undone.')) {
                    localStorage.removeItem('wisdomHistory');
                    localStorage.removeItem('wisdomJournal');
                    showNotification('Data Cleared', 'All your wisdom data has been deleted.');
                    
                    // Hide cards
                    document.getElementById('history-card').style.display = 'none';
                    document.getElementById('streak-card').style.display = 'none';
                    document.getElementById('insights-card').style.display = 'none';
                    
                    // Reset result card if active
                    const resultCard = document.getElementById('result-card');
                    if (resultCard.classList.contains('active')) {
                        resultCard.classList.remove('active');
                    }
                }
            });
        }
        
        // Export data
        function exportData(format = 'json') {
            const wisdomHistory = JSON.parse(localStorage.getItem('wisdomHistory')) || [];
            const wisdomJournal = JSON.parse(localStorage.getItem('wisdomJournal')) || {};
            
            if (wisdomHistory.length === 0) {
                showNotification('No Data', 'You don\'t have any wisdom data to export yet.');
                return;
            }
            
            const data = {
                history: wisdomHistory,
                journal: wisdomJournal
            };
            
            let content, filename, mimeType;
            
            switch (format) {
                case 'csv':
                    content = convertToCSV(wisdomHistory);
                    filename = 'wisdom-data.csv';
                    mimeType = 'text/csv';
                    break;
                default: // json
                    content = JSON.stringify(data, null, 2);
                    filename = 'wisdom-data.json';
                    mimeType = 'application/json';
            }
            
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Export Complete', `Your wisdom data has been exported as ${format.toUpperCase()}.`);
        }
        
        // Convert data to CSV
        function convertToCSV(data) {
            const headers = ['Date', 'Score', 'Rationality', 'Calmness', 'Empathy', 'Reflection', 'Kindness', 'Adaptability', 'Ethics', 'Learning', 'Meaning', 'Presence'];
            
            const rows = data.map(entry => {
                const date = new Date(entry.date).toLocaleString();
                const scores = entry.questionScores.join(',');
                return `"${date}",${entry.score},${scores}`;
            });
            
            return [headers.join(','), ...rows].join('\n');
        }
        
        // Set up result actions
        function setupResultActions() {
            const saveJournalEntry = document.getElementById('save-journal-entry');
            
            saveJournalEntry.addEventListener('click', function() {
                const journalText = document.getElementById('journal-entry').value.trim();
                
                if (journalText) {
                    // Get current date
                    const today = new Date().toISOString().split('T')[0];
                    
                    // Get existing journal entries
                    const journalEntries = JSON.parse(localStorage.getItem('wisdomJournal')) || {};
                    
                    // Add new entry
                    journalEntries[today] = journalText;
                    
                    // Save back to localStorage
                    localStorage.setItem('wisdomJournal', JSON.stringify(journalEntries));
                    
                    // Update journal entries display
                    loadJournalEntries();
                    
                    // Clear textarea
                    document.getElementById('journal-entry').value = '';
                    
                    // Show notification
                    showNotification('Journal Saved', 'Your wisdom journal entry has been saved successfully.');
                } else {
                    showNotification('Empty Entry', 'Please write something in your journal before saving.');
                }
            });
        }
        
        // Load journal entries
        function loadJournalEntries() {
            const journalEntries = JSON.parse(localStorage.getItem('wisdomJournal')) || {};
            const entriesContainer = document.getElementById('journal-entries-container');
            
            // Clear container
            entriesContainer.innerHTML = '';
            
            // Get dates and sort them in reverse chronological order
            const dates = Object.keys(journalEntries).sort().reverse();
            
            if (dates.length === 0) {
                entriesContainer.innerHTML = '<p style="color: var(--text-muted);">No journal entries yet. Start reflecting on your wisdom journey today!</p>';
                return;
            }
            
            // Add entries to container
            dates.forEach(date => {
                const entry = document.createElement('div');
                entry.className = 'journal-entry';
                
                const formattedDate = new Date(date).toLocaleDateString(undefined, { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                entry.innerHTML = `
                    <div class="journal-date">${formattedDate}</div>
                    <div class="journal-content">${journalEntries[date].replace(/\n/g, '<br>')}</div>
                `;
                
                entriesContainer.appendChild(entry);
            });
        }
        
        // Form submission and calculation
        document.getElementById('wisdom-form').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Get all question IDs
            const questionIds = [
                'rationality', 'calmness', 'empathy', 'reflection', 'kindness', 
                'adaptability', 'ethics', 'learning', 'meaning', 'presence'
            ];
            
            // Create an array with the values of the range inputs
            const scores = questionIds.map(id => parseInt(document.getElementById(id).value));
            
            // Calculate average and percentage
            const total = scores.reduce((acc, curr) => acc + curr, 0);
            const average = total / scores.length;
            const percentage = ((average - 1) / 4) * 100; // Convert 1-5 scale to 0-100%
            
            // Update gauge
            updateGauge(percentage);
            
            // Show result card
            const resultCard = document.getElementById('result-card');
            resultCard.classList.add('active');
            
            // Display appropriate message based on score
            let message = '';
            if (percentage < 30) {
                message = 'There\'s room for growth in your wisdom journey.';
            } else if (percentage < 50) {
                message = 'You\'re developing wisdom in some areas of your life.';
            } else if (percentage < 70) {
                message = 'You\'re making wise choices in many situations.';
            } else if (percentage < 90) {
                message = 'Your wisdom is impressive and guides many of your actions.';
            } else {
                message = 'You\'ve achieved remarkable wisdom in your daily life!';
            }
            
            const resultMessage = document.getElementById('result-message');
            resultMessage.textContent = message;
            resultMessage.classList.add('visible');
            
            // Update breakdown
            updateBreakdown(questionIds, scores);
            
            // Save data
            saveWisdomData(percentage, scores);
            
            // Scroll to result
            resultCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Show notification
            showNotification('Score Calculated', 'Your wisdom score has been calculated and saved.');
        });
        
        // Update gauge with animation
        function updateGauge(percentage) {
            const gaugeProgress = document.getElementById('gauge-progress');
            const gaugeText = document.getElementById('gauge-text');
            
            // Calculate the stroke-dasharray
            // Circumference = 2 * PI * r = 2 * 3.14 * 40 ≈ 251.2
            const circumference = 2 * Math.PI * 40;
            const progressValue = (percentage / 100) * circumference;
            const remainingValue = circumference - progressValue;
            
            // Set the new stroke-dasharray
            gaugeProgress.style.strokeDasharray = `${progressValue} ${remainingValue}`;
            
            // Animate the percentage text
            animateNumber(gaugeText, 0, Math.round(percentage), 1500);
        }
        
        // Update breakdown
        function updateBreakdown(questionIds, scores) {
            const breakdownContainer = document.getElementById('breakdown-items');
            breakdownContainer.innerHTML = '';
            
            const questionLabels = {
                rationality: 'Rational Decisions',
                calmness: 'Emotional Regulation',
                empathy: 'Empathetic Understanding',
                reflection: 'Self-Reflection',
                kindness: 'Compassionate Action',
                adaptability: 'Flexible Adaptation',
                ethics: 'Ethical Integrity',
                learning: 'Continuous Learning',
                meaning: 'Purpose & Meaning',
                presence: 'Mindful Presence'
            };
            
            // Sort scores from highest to lowest
            const sortedScores = questionIds.map((id, index) => ({
                id,
                label: questionLabels[id],
                score: scores[index]
            })).sort((a, b) => b.score - a.score);
            
            // Create breakdown items
            sortedScores.forEach((item, index) => {
                const percentage = ((item.score - 1) / 4) * 100;
                
                const breakdownItem = document.createElement('div');
                breakdownItem.className = 'breakdown-item';
                breakdownItem.style.animationDelay = `${index * 100}ms`;
                
                breakdownItem.innerHTML = `
                    <div class="breakdown-label">${item.label}</div>
                    <div class="breakdown-bar-container">
                        <div class="breakdown-bar" style="width: ${percentage}%"></div>
                    </div>
                    <div class="breakdown-value">${item.score}</div>
                `;
                
                breakdownContainer.appendChild(breakdownItem);
            });
        }
        
        // Animate number counting up
        function animateNumber(element, start, end, duration) {
            let startTime = null;
            
            function animate(timestamp) {
                if (!startTime) startTime = timestamp;
                const progress = Math.min((timestamp - startTime) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                element.textContent = `${value}%`;
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    element.textContent = `${end}%`;
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        // Save wisdom data to localStorage
        function saveWisdomData(score, questionScores) {
            // Get existing data or initialize empty array
            let wisdomHistory = JSON.parse(localStorage.getItem('wisdomHistory')) || [];
            
            // Add new entry
            const newEntry = {
                date: new Date().toISOString(),
                score: score,
                questionScores: questionScores
            };
            
            wisdomHistory.push(newEntry);
            
            // Save back to localStorage
            localStorage.setItem('wisdomHistory', JSON.stringify(wisdomHistory));
            
            // Update chart
            initializeChart();
            updateChart();
            
            // Show history card
            document.getElementById('history-card').style.display = 'block';
            
            // Update streak
            updateStreak();
            
            // Generate insights
            generateInsights();
        }
        
        // Load saved data from localStorage
        function loadSavedData() {
            const wisdomHistory = JSON.parse(localStorage.getItem('wisdomHistory')) || [];
            
            if (wisdomHistory.length > 0) {
                // Show history card
                document.getElementById('history-card').style.display = 'block';
                
                // Initialize and update chart
                initializeChart();
                updateChart();
                
                // Show streak card
                document.getElementById('streak-card').style.display = 'block';
                
                // Update streak
                updateStreak();
                
                // Generate insights
                generateInsights();
            }
        }
        
        // Update streak
        function updateStreak() {
            const wisdomHistory = JSON.parse(localStorage.getItem('wisdomHistory')) || [];
            
            if (wisdomHistory.length === 0) {
                return;
            }
            
            // Sort entries by date
            const sortedEntries = [...wisdomHistory].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            // Get dates as strings (YYYY-MM-DD)
            const dates = sortedEntries.map(entry => new Date(entry.date).toISOString().split('T')[0]);
            
            // Remove duplicates (only one entry per day counts)
            const uniqueDates = [...new Set(dates)];
            
            // Calculate current streak
            let streak = 0;
            const today = new Date().toISOString().split('T')[0];
            const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
            
            // Check if there's an entry for today
            if (uniqueDates.includes(today)) {
                streak = 1;
                
                // Check previous days
                let currentDate = yesterday;
                let i = uniqueDates.length - 2; // Start from the second last entry
                
                while (i >= 0 && uniqueDates[i] === currentDate) {
                    streak++;
                    currentDate = new Date(new Date(currentDate).getTime() - 86400000).toISOString().split('T')[0];
                    i--;
                }
            } else if (uniqueDates.includes(yesterday)) {
                // Start from yesterday
                streak = 1;
                
                // Check previous days
                let currentDate = new Date(Date.now() - 2 * 86400000).toISOString().split('T')[0];
                let i = uniqueDates.length - 2;
                
                while (i >= 0 && uniqueDates[i] === currentDate) {
                    streak++;
                    currentDate = new Date(new Date(currentDate).getTime() - 86400000).toISOString().split('T')[0];
                    i--;
                }
            }
            
            // Update streak value
            document.getElementById('streak-value').textContent = streak;
            
            // Generate calendar
            generateStreakCalendar(uniqueDates);
        }
        
        // Generate streak calendar
        function generateStreakCalendar(completedDates = []) {
            const calendarContainer = document.getElementById('streak-calendar');
            calendarContainer.innerHTML = '';
            
            // Get current date
            const today = new Date();
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();
            
            // Get the first day of the current month
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            
            // Get the number of days in the current month
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            
            // Create calendar days
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                calendarContainer.appendChild(emptyDay);
            }
            
            // Add cells for each day of the month
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                day.textContent = i;
                
                // Check if this day is today
                if (i === today.getDate()) {
                    day.classList.add('today');
                }
                
                // Check if this day has a completed entry
                const dateString = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                if (completedDates.includes(dateString)) {
                    day.classList.add('completed');
                }
                
                calendarContainer.appendChild(day);
            }
        }
        
        // Generate insights
        function generateInsights() {
            const wisdomHistory = JSON.parse(localStorage.getItem('wisdomHistory')) || [];
            
            if (wisdomHistory.length < 3) {
                return;
            }
            
            // Get the last 10 entries or all if less than 10
            const recentEntries = wisdomHistory.slice(-10);
            
            // Calculate average scores for each question
            const questionIds = [
                'rationality', 'calmness', 'empathy', 'reflection', 'kindness', 
                'adaptability', 'ethics', 'learning', 'meaning', 'presence'
            ];
            
            const questionLabels = {
                rationality: 'Rational Decisions',
                calmness: 'Emotional Regulation',
                empathy: 'Empathetic Understanding',
                reflection: 'Self-Reflection',
                kindness: 'Compassionate Action',
                adaptability: 'Flexible Adaptation',
                ethics: 'Ethical Integrity',
                learning: 'Continuous Learning',
                meaning: 'Purpose & Meaning',
                presence: 'Mindful Presence'
            };
            
            // Calculate averages
            const averages = questionIds.map((id, index) => {
                const scores = recentEntries.map(entry => entry.questionScores[index]);
                const average = scores.reduce((acc, curr) => acc + curr, 0) / scores.length;
                return {
                    id,
                    label: questionLabels[id],
                    average
                };
            });
            
            // Find strengths (top 2)
            const strengths = [...averages].sort((a, b) => b.average - a.average).slice(0, 2);
            
            // Find areas for improvement (bottom 2)
            const improvements = [...averages].sort((a, b) => a.average - b.average).slice(0, 2);
            
            // Calculate trend (improving, declining, or stable)
            const firstHalf = recentEntries.slice(0, Math.floor(recentEntries.length / 2));
            const secondHalf = recentEntries.slice(Math.floor(recentEntries.length / 2));
            
            const firstHalfAvg = firstHalf.reduce((acc, curr) => acc + curr.score, 0) / firstHalf.length;
            const secondHalfAvg = secondHalf.reduce((acc, curr) => acc + curr.score, 0) / secondHalf.length;
            
            let trend;
            const difference = secondHalfAvg - firstHalfAvg;
            
            if (difference > 5) {
                trend = 'improving';
            } else if (difference < -5) {
                trend = 'declining';
            } else {
                trend = 'stable';
            }
            
            // Generate insights
            const insightsContainer = document.getElementById('insights-container');
            const insightsModalContent = document.getElementById('insights-modal-content');
            
            // Clear previous insights
            insightsContainer.innerHTML = '';
            
            // Strength insight
            const strengthInsight = document.createElement('div');
            strengthInsight.className = 'insight-item';
            strengthInsight.innerHTML = `
                <div class="insight-title"><i class="fas fa-star"></i> Your Wisdom Strengths</div>
                <div class="insight-content">
                    You excel in ${strengths[0].label.toLowerCase()} and ${strengths[1].label.toLowerCase()}. 
                    These are powerful foundations for your wisdom practice.
                </div>
            `;
            
            // Improvement insight
            const improvementInsight = document.createElement('div');
            improvementInsight.className = 'insight-item';
            improvementInsight.innerHTML = `
                <div class="insight-title"><i class="fas fa-seedling"></i> Growth Opportunities</div>
                <div class="insight-content">
                    Focusing on ${improvements[0].label.toLowerCase()} and ${improvements[1].label.toLowerCase()} 
                    could help balance your wisdom profile and enhance your overall growth.
                </div>
            `;
            
            // Trend insight
            const trendInsight = document.createElement('div');
            trendInsight.className = 'insight-item';
            
            let trendIcon, trendMessage;
            
            if (trend === 'improving') {
                trendIcon = 'fa-chart-line';
                trendMessage = 'Your wisdom scores are trending upward. Keep up the great work!';
            } else if (trend === 'declining') {
                trendIcon = 'fa-chart-line-down';
                trendMessage = 'Your wisdom scores have been declining slightly. Consider what factors might be affecting your practice.';
            } else {
                trendIcon = 'fa-equals';
                trendMessage = 'Your wisdom scores have been consistent. Consider challenging yourself in new ways.';
            }
            
            trendInsight.innerHTML = `
                <div class="insight-title"><i class="fas ${trendIcon}"></i> Your Wisdom Trend</div>
                <div class="insight-content">${trendMessage}</div>
            `;
            
            // Add insights to containers
            insightsContainer.appendChild(strengthInsight);
            insightsContainer.appendChild(improvementInsight);
            insightsContainer.appendChild(trendInsight);
            
            // Show insights card
            document.getElementById('insights-card').style.display = 'block';
        }
        
        // Generate radar chart
        function generateRadarChart() {
            const wisdomHistory = JSON.parse(localStorage.getItem('wisdomHistory')) || [];
            
            if (wisdomHistory.length === 0) {
                return;
            }
            
            // Get the latest entry
            const latestEntry = wisdomHistory[wisdomHistory.length - 1];
            const scores = latestEntry.questionScores;
            
            // Define the categories
            const categories = [
                'Rational Decisions',
                'Emotional Regulation',
                'Empathetic Understanding',
                'Self-Reflection',
                'Compassionate Action',
                'Flexible Adaptation',
                'Ethical Integrity',
                'Continuous Learning',
                'Purpose & Meaning',
                'Mindful Presence'
            ];
            
            // Get the radar chart SVG
            const svg = document.getElementById('radar-chart');
            svg.innerHTML = '';
            
            // Calculate center and radius
            const centerX = 100;
            const centerY = 100;
            const radius = 80;
            
            // Calculate points for each category
            const angleStep = (Math.PI * 2) / categories.length;
            const points = scores.map((score, i) => {
                const angle = i * angleStep - Math.PI / 2; // Start from top
                const value = (score - 1) / 4; // Normalize to 0-1
                const x = centerX + radius * value * Math.cos(angle);
                const y = centerY + radius * value * Math.sin(angle);
                return { x, y };
            });
            
            // Draw circles
            for (let i = 1; i <= 5; i++) {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', centerX);
                circle.setAttribute('cy', centerY);
                circle.setAttribute('r', radius * i / 5);
                circle.setAttribute('class', 'radar-circle');
                svg.appendChild(circle);
            }
            
            // Draw axes
            for (let i = 0; i < categories.length; i++) {
                const angle = i * angleStep - Math.PI / 2;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', centerX);
                line.setAttribute('y1', centerY);
                line.setAttribute('x2', x);
                line.setAttribute('y2', y);
                line.setAttribute('class', 'radar-axis');
                svg.appendChild(line);
                
                // Add labels
                const labelX = centerX + (radius + 15) * Math.cos(angle);
                const labelY = centerY + (radius + 15) * Math.sin(angle);
                
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', labelX);
                text.setAttribute('y', labelY);
                text.setAttribute('text-anchor', 'middle');
                text.setAttribute('dominant-baseline', 'middle');
                text.setAttribute('class', 'radar-label');
                text.textContent = categories[i].split(' ')[0]; // Just use first word for brevity
                svg.appendChild(text);
            }
            
            // Draw data area
            const pathData = points.map((point, i) => {
                return (i === 0 ? 'M' : 'L') + point.x + ',' + point.y;
            }).join(' ') + 'Z';
            
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('d', pathData);
            path.setAttribute('class', 'radar-area');
            svg.appendChild(path);
            
            // Add points
            points.forEach((point) => {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', point.x);
                circle.setAttribute('cy', point.y);
                circle.setAttribute('r', 3);
                circle.setAttribute('fill', 'var(--primary-light)');
                svg.appendChild(circle);
            });
        }
        
        // Initialize chart
        function initializeChart() {
            const canvas = document.getElementById('history-chart');
            if (!canvas) return;
            
            // Clear existing chart if any
            if (window.historyChart) {
                window.historyChart.destroy && window.historyChart.destroy();
            }
            
            const ctx = canvas.getContext('2d');
            
            // Create gradient for chart
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, 'rgba(16, 185, 129, 0.8)');
            gradient.addColorStop(1, 'rgba(16, 185, 129, 0.1)');
            
            // Create chart using Chart.js
            window.historyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Wisdom Score',
                        data: [],
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim(),
                        backgroundColor: gradient,
                        borderWidth: 3,
                        pointBackgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--primary-light').trim(),
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim(),
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--background-light').trim(),
                            titleColor: getComputedStyle(document.documentElement).getPropertyValue('--text-color').trim(),
                            bodyColor: getComputedStyle(document.documentElement).getPropertyValue('--primary-light').trim(),
                            titleFont: {
                                size: 14,
                                weight: 'bold'
                            },
                            bodyFont: {
                                size: 14
                            },
                            padding: 12,
                            cornerRadius: 8,
                            displayColors: false,
                            callbacks: {
                                title: function(tooltipItems) {
                                    return tooltipItems[0].label;
                                },
                                label: function(context) {
                                    return `Wisdom Score: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--chart-grid').trim(),
                                drawBorder: false
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--chart-text').trim(),
                                font: {
                                    size: 12
                                },
                                maxRotation: 45,
                                minRotation: 45
                            }
                        },
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--chart-grid').trim(),
                                drawBorder: false
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--chart-text').trim(),
                                font: {
                                    size: 12
                                },
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    },
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    animations: {
                        tension: {
                            duration: 1000,
                            easing: 'easeOutQuart',
                            from: 0.8,
                            to: 0.4,
                            loop: false
                        }
                    }
                }
            });
            
            // Update chart with data
            updateChart();
        }
        
        // Update chart with data
        function updateChart() {
            if (!window.historyChart) return;
            
            const wisdomHistory = JSON.parse(localStorage.getItem('wisdomHistory')) || [];
            
            // Get active time period
            const activePeriod = document.querySelector('.tab-trigger.active')?.dataset.period || 'week';
            
            // Filter data based on time period
            const filteredData = filterDataByPeriod(wisdomHistory, activePeriod);
            
            // Format dates for display
            const labels = filteredData.map(entry => {
                const date = new Date(entry.date);
                return formatDate(date, activePeriod);
            });
            
            const scores = filteredData.map(entry => entry.score);
            
            // Update chart data
            window.historyChart.data.labels = labels;
            window.historyChart.data.datasets[0].data = scores;
            window.historyChart.update();
        }
        
        // Filter data by time period
        function filterDataByPeriod(data, period) {
            const now = new Date();
            let cutoffDate = new Date();
            
            switch (period) {
                case 'day':
                    cutoffDate.setHours(now.getHours() - 24);
                    break;
                case 'week':
                    cutoffDate.setDate(now.getDate() - 7);
                    break;
                case 'month':
                    cutoffDate.setMonth(now.getMonth() - 1);
                    break;
                case 'year':
                    cutoffDate.setFullYear(now.getFullYear() - 1);
                    break;
                default:
                    cutoffDate = new Date(0); // All data
            }
            
            return data.filter(entry => new Date(entry.date) >= cutoffDate);
        }
        
        // Format date based on period
        function formatDate(date, period) {
            const options = { hour: '2-digit', minute: '2-digit' };
            
            switch (period) {
                case 'day':
                    return date.toLocaleTimeString([], options);
                case 'week':
                    return date.toLocaleDateString([], { weekday: 'short', day: 'numeric' });
                case 'month':
                    return date.toLocaleDateString([], { month: 'short', day: 'numeric' });
                case 'year':
                    return date.toLocaleDateString([], { month: 'short', year: '2-digit' });
                default:
                    return date.toLocaleDateString();
            }
        }
        
        // Tab switching
        document.querySelectorAll('.tab-trigger').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs
                document.querySelectorAll('.tab-trigger').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // Update chart with new period
                updateChart();
            });
        });
        
        // Show notification
        function showNotification(title, message) {
            const notification = document.getElementById('notification');
            const notificationTitle = document.getElementById('notification-title');
            const notificationMessage = document.getElementById('notification-message');
            const closeNotification = document.getElementById('close-notification');
            
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            notification.classList.add('show');
            
            // Auto hide after 5 seconds
            const hideTimeout = setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
            
            // Manual close
            closeNotification.addEventListener('click', function() {
                notification.classList.remove('show');
                clearTimeout(hideTimeout);
            });
            
            // Reset progress animation
            const progressBar = notification.querySelector('.notification-progress');
            progressBar.style.animation = 'none';
            progressBar.offsetHeight; // Trigger reflow
            progressBar.style.animation = 'notification-progress 5s linear forwards';
        }
    </script>
</body>
</html>
